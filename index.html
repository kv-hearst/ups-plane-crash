<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPS Plane Crash</title>
    <link rel="stylesheet" href="styles.css">

    <style>
        .header {
            text-align: center;
            /* padding: 20px; */
        }

        .scrolly-container {
            position: relative;
            width: 100%;
            height: 600px;
            overflow-y: scroll;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 0.5s ease-in-out;
        }
        .step {
            max-width: 400px;
            margin: 0 auto;
            height: 100px;
            padding: 10px;
            border: 0px solid #ccc;
            border-radius: 4px;
            margin-bottom: 400px;
            margin-top: 50vh;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            background-color: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(10px);
            font-size: 18px;
            line-height: 1.6;
        }
        
        .step:last-child {
            margin-bottom: 50vh;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>UPS plane crash timeline</h1>
        <p>Scroll down to see how events unfolded.</p>
    </div>

    <div class="scrolly-container" id="scrolly-container">
        <div class="step" id="step-1" data-image="assets/damages-1.png">
            <p>The UPS cargo plane takes off from Louisville International Airport.</p>
        </div>
        <div class="step" id="step-2" data-image="images/engine-trouble.jpg">
            <p>The pilots report engine trouble and request to return to the airport.</p>
        </div>
        <div class="step" id="step-3" data-image="images/emergency-landing.jpg">
            <p>The pilots attempt an emergency landing at a nearby field.</p>
        </div>
        <div class="step" id="step-4" data-image="images/crash-site.jpg">
            <p>The plane crashes, resulting in fatalities and injuries.</p>
        </div>
    </div>

    <div class="footer">
        <p>Interactive: Katrina Ventura/Get the Facts Data Team</p>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const container = document.getElementById("scrolly-container");
        const steps = document.querySelectorAll(".step");
        
        // Set initial background
        if (steps.length > 0) {
            container.style.backgroundImage = `url(${steps[0].dataset.image})`;
        }
        
        // Change background on scroll based on which step is in view
        container.addEventListener("scroll", function() {
            const containerTop = container.scrollTop;
            const containerHeight = container.clientHeight;
            const midPoint = containerTop + (containerHeight / 2);
            
            steps.forEach(step => {
                const stepTop = step.offsetTop;
                const stepBottom = stepTop + step.offsetHeight;
                
                // Check if step is in the middle of viewport
                if (midPoint >= stepTop && midPoint <= stepBottom) {
                    const newImage = step.dataset.image;
                    if (container.style.backgroundImage !== `url("${newImage}")`) {
                        container.style.backgroundImage = `url(${newImage})`;
                    }
                }
            });
        });
    });
</script>
</body>
</html>