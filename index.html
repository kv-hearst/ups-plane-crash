<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPS Plane Crash</title>
    <link rel="stylesheet" href="styles.css">

    <style>
        .header {
            text-align: center;
            margin: 0;
        }

        
        .scrolly-container {
            position: relative;
            width: 500px;
            height: 600px;
            overflow-y: scroll;
            background-size: contain;
            background-position: center;
            transition: background-image 0.9s ease-in-out;

            background-repeat: no-repeat;
        }


        .scrolly-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: contain;
            background-position: center;
            opacity: 0;
            transition: opacity 0.6s ease-in-out;
            pointer-events: none;
            z-index: 0;

            background-repeat: no-repeat;
        }

        .scrolly-container.transitioning::before {
            opacity: 1;
        }
        .step {
            max-width: 400px;
            margin: 0 auto;
            height: 100px;
            padding: 20px;
            border: 0px solid #ccc;
            border-radius: 1px;
            margin-bottom: 400px;
            margin-top: 50vh;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            background-color: whitesmoke;
/* 
            backdrop-filter: blur(10px); */
            font-size: 18px;
            line-height: 1.6;
            /* opacity: 0.9; */

            display: flex;
            justify-content: center;
            align-items: center;

        }
   
        .step:last-child {
            margin-bottom: 50vh;
        }

        @media (max-width: 400px) {
            .scrolly-container {
                width: 100%;
                height: 600px;
            }
            .step {
                max-width: 80%;
                font-size: 16px;
            }
            .step p{
                font-size: 1rem;
            }
        }

    </style>
</head>
<body>
    <div class="header">
        <p>Scroll below to see how events unfolded.</p>
    </div>

    <div class="scrolly-container" id="scrolly-container">
        <div class="step" id="step-0" data-image="assets/map-1.png">
            <p>5:08 PM: The UPS cargo plane began taxiing in Louisville Muhammad Ali International airport.</p>
        </div>
        <div class="step" id="step-1" data-image="assets/map-2.png">
            <p>5:12 PM: The plane made a final turn before takeoff.</p>
        </div>
        <div class="step" id="step-3" data-image="assets/map-3.png">
            <p>5:13 PM: The plane reached top speed of 214 mph and caught fire while still on the runway.</p>
        </div>

        <div class="step" id="step-4" data-image="assets/footage-1.png">
            <p>Footage shows the plane caught fire while still on the runway.</p>
             
        </div>
        <div class="step" id="step-5" data-image="assets/map-4.png">
            <p>5:13:29 PM: Surveillance at a truck parts store shows the plane crashing into businesses.</p>
        </div>
        <div class="step" id="step-6" data-image="assets/map-5.png">
            <p>The UPS cargo plane, which was fully fueled, spreads fire to nearby facilities including a large recycling center. </p>
        </div>
        <div class="step" id="step-7" data-image="assets/footage-2.png">
            <p>A shelter-in-place was issued all the way north to Indiana.</p>
        </div>

       
    </div>

    <div class="footer">
        <p>Interactive: Katrina Ventura and Annie Jennemann/Get the Facts Data Team</p>
        <p>Source: Google Earth Pro, ADS-B Exchange, Flightradar 24</p>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const container = document.getElementById("scrolly-container");
        const steps = document.querySelectorAll(".step");
        
        // Set initial background
        if (steps.length > 0) {
            container.style.backgroundImage = `url(${steps[0].dataset.image})`;
        }
        
        // Change background on scroll based on which step is in view
        container.addEventListener("scroll", function() {
            const containerTop = container.scrollTop;
            const containerHeight = container.clientHeight;
            const midPoint = containerTop + (containerHeight / 2);
            
            steps.forEach(step => {
                const stepTop = step.offsetTop;
                const stepBottom = stepTop + step.offsetHeight;
                
                // Check if step is in the middle of viewport
                if (midPoint >= stepTop && midPoint <= stepBottom) {
                    const newImage = step.dataset.image;
                    if (container.style.backgroundImage !== `url("${newImage}")`) {
                        container.style.backgroundImage = `url(${newImage})`;
                    }
                }
            });
        });
    });
</script>
</body>
</html>